version: '1.0'

steps:
  java_build:
    working_directory: ${{main_clone}}
    description: Building with gradle...
    image: openjdk:8-jdk
    image_name: labsji/yo_cordapp
    commands:
      - echo "Greetings building with Gradlew"
      - id
      - ./gradlew --debug -g /codefresh/volume/.gradle deployNodes
      - ls -al /codefresh/volume/build/nodes/Controller
      
  build:
    type: build
    working_directory: build/nodes/Controller/
    dockerfile: build/nodes/Controller/Dockerfile
    image_name: labsji/yo_cordapp_node
    tag: '${{CF_BRANCH}}'

